{% extends 'E_campaign/base.html'%} {% load static %} {%block content%}

<div
    id="toast-success"
    style="position: fixed; top: 30px; right: 30px; visibility: hidden"
    class="flex items-center p-4 mb-4 w-full max-w-xs text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800"
    role="alert"
>
    <div
        class="inline-flex flex-shrink-0 justify-center items-center w-8 h-8 text-green-500 bg-green-100 rounded-lg dark:bg-green-800 dark:text-green-200"
    >
        <svg
            aria-hidden="true"
            class="w-5 h-5"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"
            ></path>
        </svg>
        <span class="sr-only">Check icon</span>
    </div>
    <div id="notification" class="ml-3 text-sm font-normal">
        Loaded Successfully!
    </div>
    <button
        type="button"
        id="hide_success"
        class="ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700"
        data-dismiss-target="#toast-success"
        aria-label="Close"
    >
        <span class="sr-only">Close</span>
        <svg
            aria-hidden="true"
            class="w-5 h-5"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                fill-rule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                clip-rule="evenodd"
            ></path>
        </svg>
    </button>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        $("#hide_success").on("click", function () {
            $("#toast-success").hide()
        })
    </script>
</div>

<div
    id="toast-danger"
    style="position: fixed; top: 30px; right: 30px; visibility: hidden"
    class="flex items-center p-4 mb-4 w-full max-w-xs text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800"
    role="alert"
>
    <div
        class="inline-flex flex-shrink-0 justify-center items-center w-8 h-8 text-red-500 bg-red-100 rounded-lg dark:bg-red-800 dark:text-red-200"
    >
        <svg
            aria-hidden="true"
            class="w-5 h-5"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                fill-rule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                clip-rule="evenodd"
            ></path>
        </svg>
        <span class="sr-only">Error icon</span>
    </div>
    <div class="ml-3 text-sm font-normal">No Data is uploaded to load!!</div>
    <button
        type="button"
        id="hide_danger"
        class="ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700"
        data-dismiss-target="#toast-danger"
        aria-label="Close"
    >
        <span class="sr-only">Close</span>
        <svg
            aria-hidden="true"
            class="w-5 h-5"
            fill="currentColor"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                fill-rule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                clip-rule="evenodd"
            ></path>
        </svg>
    </button>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        $("#hide_danger").on("click", function () {
            $("#toast-danger").hide()
        })
    </script>
</div>

<div
    id="toast-interactive"
    style="
        position: fixed;
        left: 38%;
        top: 40%;
        box-shadow: 0 0 10px rgb(4, 4, 4);
        visibility: hidden;
    "
    class="p-4 w-full max-w-xs text-gray-600 bg-white rounded-lg shadow dark:bg-gray-800 dark:text-gray-400"
    role="alert"
>
    <div class="flex">
        <div
            class="inline-flex flex-shrink-0 justify-center items-center w-12 h-10 text-blue-500 bg-blue-100 rounded-lg dark:text-blue-300 dark:bg-blue-900"
        >
            <svg
                aria-hidden="true"
                class="w-5 h-5"
                fill="currentColor"
                viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    fill-rule="evenodd"
                    d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                    clip-rule="evenodd"
                ></path>
            </svg>
            <span class="sr-only">Refresh icon</span>
        </div>
        <div class="ml-3 text-sm font-normal">
            <span
                class="mb-1 text-sm font-semibold text-gray-900 dark:text-white"
                >Start campaign</span
            >
            <div class="mb-2 text-sm font-normal">
                You want to start the campaign?
            </div>
            <div class="grid grid-cols-2 gap-2">
                <div>
                    <a
                        onclick="run_campaign();"
                        class="inline-flex justify-center w-full px-2 py-1.5 text-xs font-medium text-center text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-500 dark:hover:bg-blue-600 dark:focus:ring-blue-800"
                        >Yes</a
                    >
                </div>
                <div>
                    <a
                        id="no"
                        class="inline-flex justify-center w-full px-2 py-1.5 text-xs font-medium text-center text-gray-900 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 dark:bg-gray-600 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-700 dark:focus:ring-gray-700"
                        >Not now</a
                    >
                </div>
            </div>
        </div>
        <button
            type="button"
            id="Big_toast"
            class="ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700"
            data-dismiss-target="#toast-interactive"
            aria-label="Close"
        >
            <span class="sr-only">Close</span>
            <svg
                aria-hidden="true"
                class="w-5 h-5"
                fill="currentColor"
                viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    fill-rule="evenodd"
                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                    clip-rule="evenodd"
                ></path>
            </svg>
        </button>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>
            $("#Big_toast").on("click", function () {
                document.getElementById("start").innerHTML = "START CAMPAIGN"
                $("#toast-interactive").hide()
            })

            $("#no").on("click", function () {
                $("#toast-interactive").hide()
                document.getElementById("start").innerHTML = "START CAMPAIGN"
            })

            function run_campaign() {
                $("#toast-interactive").hide()
                $("#draggable").css("visibility", "visible")
                console.log("running..")
                $.get("dashboard/" + 2, function (data) {})
            }
        </script>
    </div>
</div>

<section id="dashboard" class="text-gray-600 body-font">
    <div class="container px-5 py-6 mx-auto">
        <div
            class="flex flex-wrap w-full mb-7 flex-col items-center text-center"
        >
            <h1
                class="sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900"
            >
                E_campaign
            </h1>
            <p class="lg:w-1/2 w-full leading-relaxed text-gray-500">
                All in one email campaign suite
            </p>
        </div>

        {%block heading %}
        <center>
            <h1 id="welcome">Welcome to dashboard - {{ user.username }}!</h1>
        </center>
        {% endblock %}

        <div class="flex flex-wrap -m-4 ml-20">
            <div class="xl:w-1/4 md:w-1/2 p-4">
                <div
                    style="box-shadow: 0 0 10px #ccc"
                    class="border border-gray-200 p-6 rounded-lg box shadow-xl"
                >
                    <div
                        class="w-10 h-10 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 mb-4"
                    >
                        <svg
                            fill="none"
                            stroke="currentColor"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            class="w-6 h-6"
                            viewBox="0 0 24 24"
                        >
                            <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
                        </svg>
                    </div>
                    <h2
                        class="text-lg text-gray-900 font-medium title-font mb-2"
                    >
                        SMTP UPLOADED
                    </h2>
                    <p id="no_of_smtp" class="leading-relaxed text-base">
                        {{ no_of_smtp }}
                    </p>
                </div>
            </div>
            <div class="xl:w-1/4 md:w-1/2 p-4">
                <div
                    style="box-shadow: 0 0 10px #ccc"
                    class="border border-gray-200 p-6 rounded-lg box shadow-xl"
                >
                    <div
                        class="w-10 h-10 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 mb-4"
                    >
                        <svg
                            fill="none"
                            stroke="currentColor"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            class="w-6 h-6"
                            viewBox="0 0 24 24"
                        >
                            <circle cx="6" cy="6" r="3"></circle>
                            <circle cx="6" cy="18" r="3"></circle>
                            <path
                                d="M20 4L8.12 15.88M14.47 14.48L20 20M8.12 8.12L12 12"
                            ></path>
                        </svg>
                    </div>
                    <h2
                        class="text-lg text-gray-900 font-medium title-font mb-2"
                    >
                        DATA UPLOADED
                    </h2>
                    <p id="contacts" class="leading-relaxed text-base">
                        {{contacts}}
                    </p>
                </div>
            </div>
            <div class="xl:w-1/4 md:w-1/2 p-4">
                <div
                    style="box-shadow: 0 0 10px #ccc"
                    class="border border-gray-200 p-6 rounded-lg box shadow-xl"
                >
                    <div
                        class="w-10 h-10 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 mb-4"
                    >
                        <svg
                            fill="none"
                            stroke="currentColor"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            class="w-6 h-6"
                            viewBox="0 0 24 24"
                        >
                            <path
                                d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"
                            ></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </div>
                    <h2
                        class="text-lg text-gray-900 font-medium title-font mb-2"
                    >
                        CONTENT UPLOADED
                    </h2>
                    <p id="contents" class="leading-relaxed text-base">
                        {{contents}}
                    </p>
                </div>
            </div>
            <div class="xl:w-1/4 md:w-1/2 p-4">
                <div
                    style="box-shadow: 0 0 10px #ccc"
                    class="border border-gray-200 p-6 rounded-lg box shadow-xl"
                >
                    <div
                        class="w-10 h-10 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 mb-4"
                    >
                        <svg
                            fill="none"
                            stroke="currentColor"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            class="w-6 h-6"
                            viewBox="0 0 24 24"
                        >
                            <path
                                d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"
                            ></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </div>
                    <h2
                        class="text-lg text-gray-900 font-medium title-font mb-2"
                    >
                        LOAD EVERYTHING
                    </h2>
                    <!-- {%csrf_token%} -->
                    <button
                        onclick="load(1);"
                        class="text-white bg-indigo-500 border-0 py-1 px-2 focus:outline-none hover:bg-indigo-600 rounded text-lg"
                    >
                        Load data
                    </button>
                    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
                    <script>
                        function load(pk) {
                            $.get("dashboard/" + pk, function (data) {
                                if (data.isDataNotUploaded) {
                                    $("#toast-danger").css(
                                        "visibility",
                                        "visible"
                                    )
                                } else {
                                    $("#no_of_smtp").html(data.no_of_smtp)
                                    $("#contacts").html(data.contacts)
                                    $("#contents").html(data.contents)
                                    $("#instance").html(data.instance)
                                    $("#no_of_phone_numbers").html(
                                        data.no_of_phone_numbers
                                    )
                                    $("#no_of_proxy").html(data.no_of_proxy)
                                    $("#toast-success").css(
                                        "visibility",
                                        "visible"
                                    )
                                }
                            })
                        }
                    </script>
                </div>
            </div>
            <div class="xl:w-1/4 md:w-1/2 p-4">
                <div
                    style="box-shadow: 0 0 10px #ccc"
                    class="border border-gray-200 p-6 rounded-lg box shadow-xl"
                >
                    <div
                        class="w-10 h-10 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 mb-4"
                    >
                        <svg
                            fill="none"
                            stroke="currentColor"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            class="w-6 h-6"
                            viewBox="0 0 24 24"
                        >
                            <path
                                d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1zM4 22v-7"
                            ></path>
                        </svg>
                    </div>
                    <h2
                        class="text-lg text-gray-900 font-medium title-font mb-2"
                    >
                        TOTAL INSTANCES
                    </h2>
                    <p id="instance" class="leading-relaxed text-base">
                        {{no_of_instance}}
                    </p>
                </div>
            </div>
            <div class="xl:w-1/4 md:w-1/2 p-4">
                <div
                    style="box-shadow: 0 0 10px #ccc"
                    class="border border-gray-200 p-6 rounded-lg box shadow-xl"
                >
                    <div
                        class="w-10 h-10 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 mb-4"
                    >
                        <svg
                            fill="none"
                            stroke="currentColor"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            class="w-6 h-6"
                            viewBox="0 0 24 24"
                        >
                            <path
                                d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"
                            ></path>
                        </svg>
                    </div>
                    <h2
                        class="text-lg text-gray-900 font-medium title-font mb-2"
                    >
                        TOTAL PHONE NUMBER
                    </h2>
                    <p
                        id="no_of_phone_numbers"
                        class="leading-relaxed text-base"
                    >
                        {{no_of_phone_numbers}}
                    </p>
                </div>
            </div>
            <div class="xl:w-1/4 md:w-1/2 p-4">
                <div
                    style="box-shadow: 0 0 10px #ccc"
                    class="border border-gray-200 p-6 rounded-lg box shadow-xl"
                >
                    <div
                        class="w-10 h-10 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 mb-4"
                    >
                        <svg
                            fill="none"
                            stroke="currentColor"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            class="w-6 h-6"
                            viewBox="0 0 24 24"
                        >
                            <path
                                d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"
                            ></path>
                        </svg>
                    </div>
                    <h2
                        class="text-lg text-gray-900 font-medium title-font mb-2"
                    >
                        TOTAL SUBJECT LINES
                    </h2>
                    <p class="leading-relaxed text-base">{{no_of_subjects}}</p>
                </div>
            </div>
            <div class="xl:w-1/4 md:w-1/2 p-4">
                <div
                    style="box-shadow: 0 0 10px #ccc"
                    class="border border-gray-200 p-6 rounded-lg box shadow-xl"
                >
                    <div
                        class="w-10 h-10 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 mb-4"
                    >
                        <svg
                            fill="none"
                            stroke="currentColor"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            class="w-6 h-6"
                            viewBox="0 0 24 24"
                        >
                            <path
                                d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"
                            ></path>
                        </svg>
                    </div>
                    <h2
                        class="text-lg text-gray-900 font-medium title-font mb-2"
                    >
                        TOTAL PROXIES USED
                    </h2>
                    <p id="no_of_proxy" class="leading-relaxed text-base">
                        {{no_of_proxy}}
                    </p>
                </div>
            </div>
        </div>

        <div class="flex items-center" style="margin-left: 43%">
            <button
                onclick="start(1);"
                id="start"
                class="mx-2 mt-16 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg"
            >
                START CAMPAIGN
            </button>

            <button
                onclick="pause(4);"
                id="pause"
                style="visibility: hidden"
                class="mx-2 mt-16 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg"
            >
                PAUSE
            </button>
        </div>
    </div>
</section>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    let notificationSocket = new WebSocket(
        "ws://" + window.location.host + "/ws/notification/"
    )

    function pause(pk) {
        if (document.getElementById("pause").innerHTML == "PAUSE") {
            document.getElementById("pause").innerHTML = "PLAY"
            $.get("dashboard/" + pk, function (data) {})
        } else {
            document.getElementById("pause").innerHTML = "PAUSE"

            $.get("dashboard/" + 5, function (data) {})
        }
    }
    function start(pk) {
        if (document.getElementById("start").innerHTML != "STOP") {
            notificationSocket = new WebSocket(
                "ws://" + window.location.host + "/ws/notification/"
            )
            document.getElementById("start").innerHTML = "STOP"
            document.getElementById("logging").innerHTML = "loading..."
            document.getElementById("draggable").innerHTML = "loading..."
            $.get("dashboard/" + pk, function (data) {
                if (data.isDataNotUploaded) {
                    $("#toast-danger").css("visibility", "visible")
                } else {
                    $("#toast-interactive").css("visibility", "visible")
                    $("#pause").css("visibility", "visible")
                }
            })
        } else {
            notificationSocket.close()
            document.getElementById("start").innerHTML = "START CAMPAIGN"

            $.get("dashboard/" + 3, function (data) {
                $("#draggable").hide()
                $("#pause").css("visibility", "hidden")
            })
        }
    }
    if (notificationSocket.OPEN) {
        console.log("Successfull connected to websocket!!")
    }

    notificationSocket.onmessage = function (e) {
        const data = JSON.parse(e.data)
        console.log(data)
        let isStart = data.isStarting || false
        let isStarted = data.isStarted || false
        let isPaused = data.isPaused || false
        let isLog = data.isLog || false
        let isStopped = data.isStopped || false

        // Do some stuff...
        if (!isStart && !isStarted && !isPaused) {
            document.querySelector("#log").innerHTML +=
                "<p class='p-1'>" + data.message + "</p>"
        }

        if (isLog) {
            document.querySelector("#logging").innerHTML +=
                "<p class='p-1'>" + data.message.replace("\n", "</br>") + "</p>"
        }

        if (isStart) {
            document.querySelector("#start").innerHTML = data.message
        }

        if (isStopped) {
            document.querySelector("#start").innerHTML = data.message
            $("#pause").css("visibility", "hidden")
        }
        if (isStarted) {
            document.querySelector("#start").innerHTML = data.message
            $("#pause").css("visibility", "visible")
        }

        if (isPaused) {
            document.querySelector("#pause").innerHTML = data.message
        }
    }

    notificationSocket.onclose = function (e) {
        console.error("Websocket connection unexpectedly closedd!!")
    }

    // notificationSocket.send(
    //     JSON.stringify({
    //         message: message,
    //     })
    // )
</script>

<div
    id="draggable"
    class="ui-widget-content box shadow-2xl"
    style="
        visibility: hidden;
        position: fixed;
        top: 30%;
        left: 36%;
        width: 400px;
        height: 400px;
        background-color: rgb(59, 58, 58);
        color: white;
        border-radius: 10px;
        border: 2px solid #ccc;
        box-shadow: 0 0 10px #ccc;
    "
>
    <b
        ><h1 class="p-4">
            Console (Don't reload the page while the campaign is running)
        </h1></b
    >
    <hr />
    <div id="log" style="overflow-y: scroll; height: 320px"></div>
</div>

<div
    id="logs"
    class="ui-widget-content box shadow-2xl"
    style="
        background-color: rgb(59, 58, 58);
        color: white;
        border-radius: 10px;
        border: 2px solid rgb(9, 8, 8);
        box-shadow: 0 0 10px #ccc;
        background-color: black;
        width: 700px;
        height: 500px;
        margin: auto;
        margin-left: 350px;
        margin-top: 30px;
        margin-bottom: 20px;
    "
>
    <b><h1 class="p-4">Logs</h1></b>
    <hr />
    <div id="logging" style="overflow-y: scroll; height: 420px"></div>
</div>
<div class="flex items-center" style="margin-left: 32%">
    <button
        onclick="load_log(6);"
        id="load_log"
        class="mx-2 mt-2 text-white bg-indigo-500 border-0 py-1 px-4 focus:outline-none hover:bg-indigo-600 rounded text-lg"
    >
        Load Logs
    </button>
    <button
        class="mx-2 mt-2 text-white bg-indigo-500 border-0 py-1 px-4 focus:outline-none hover:bg-indigo-600 rounded text-lg"
    >
        <a href="{% url 'download_file' filename='logs.txt' %}"
            >Download Logs</a
        >
    </button>
    <button
        class="mx-2 mt-2 text-white bg-indigo-500 border-0 py-1 px-4 focus:outline-none hover:bg-indigo-600 rounded text-lg"
    >
        <a href="{% url 'download_file' filename='faulty_smtps.txt' %}"
            >Download Faulty smtps</a
        >
    </button>
</div>

<div
    id="receipts"
    class="ui-widget-content box shadow-2xl"
    style="
        background-color: rgb(59, 58, 58);
        color: white;
        border-radius: 10px;
        border: 2px solid rgb(9, 8, 8);
        box-shadow: 0 0 10px #ccc;
        background-color: black;
        width: 700px;
        height: 500px;
        margin: auto;
        margin-left: 350px;
        margin-top: 30px;
        margin-bottom: 20px;
    "
>
    <b><h1 class="p-4">Receipts</h1></b>
    <hr />
    <div id="receipt" style="overflow-y: scroll; height: 420px"></div>
</div>
<div class="flex items-center" style="margin-left: 47%; margin-bottom: 50px">
    <button
        onclick="load_receipt();"
        id="load_receipt"
        class="mx-2 mt-2 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg"
    >
        Load receipts
    </button>
</div>
<span style="margin-left: 10%; margin-bottom: 50px"
    >@developer - Sourav Bera Aka Speed</span
>
<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
<script>
    $(function () {
        $("#draggable").draggable()
    })

    function load_log(pk) {
        $.get("dashboard/" + pk, function (data) {
            message = data["message"]
            document.querySelector("#logging").innerHTML +=
                "<p class='p-1'>" + message + " </p>"
        })
    }

    function load_receipt() {
        document.querySelector("#receipt").innerHTML +=
            "<p class='p-1'> Loading... </p>"
        $.get(
            "https://readreceiptapi.herokuapp.com/upload/get/getreceipts",
            function (data) {
                for (i = 0; i < data.length; i++) {
                    document.querySelector("#receipt").innerHTML +=
                        "<p class='p-1'>" + data[i].email + " (Opened) </p>"
                }
            }
        )
    }
</script>

{%block logout%} {% endblock%} {% endblock%}
